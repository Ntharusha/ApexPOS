name: Production CI\non:\n  push:\n    branches: [ main ]\n  pull_request:\n    branches: [ main ]\njobs:\n  security:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Security Linting\n        run: |\n          pip install bandit safety\n          bandit -r .\n          safety check\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Setup Python\n        uses: actions/setup-python@v5\n        with:\n          python-version: '3.11'\n      - name: Run Unit Tests\n        run: |\n          pip install -r requirements.txt pytest\n          pytest\n  build:\n    needs: [security, test]\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Set up Docker Buildx\n        uses: docker/setup-buildx-action@v3\n      - name: Build and Lint Image\n        uses: docker/build-push-action@v5\n        with:\n          context: .\n          push: false\n          tags: fastapi-app:latest